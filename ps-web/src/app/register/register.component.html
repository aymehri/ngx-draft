<form class="form-horizontal" novalidate (ngSubmit)="save()" [formGroup]="registerForm">
  <fieldset>
    <div class="form-group" [ngClass]="{'has-danger': (registerForm.get('firstName').touched ||
                                                      registerForm.get('firstName').dirty) &&
                                                      !registerForm.get('firstName').valid }">
      <label class="col-md-2 control-label" for="firstNameId">First Name</label>
      <div class="col-md-8">
        <input class="form-control" id="firstNameId" type="text" placeholder="First Name (required)" formControlName="firstName"/>
        <span class="text-muted" *ngIf="(registerForm.get('firstName').touched ||
                                                         registerForm.get('firstName').dirty) &&
                                                         registerForm.get('firstName').errors">
        <span *ngIf="registerForm.get('firstName').errors.required">Please enter your first name.</span>
        <span *ngIf="registerForm.get('firstName').errors.minlength">The first name must be longer than 3 characters.</span>
        </span>
      </div>
    </div>

    <div class="form-group" [ngClass]="{'has-danger': (registerForm.get('lastName').touched || registerForm.get('lastName').dirty) && !registerForm.get('lastName').valid }">
      <label class="col-md-2 control-label" for="lastNameId">Last Name</label>
      <div class="col-md-8">
        <input class="form-control" id="lastNameId" type="text" placeholder="Last Name (required)" formControlName="lastName" />
        <span class="text-muted" *ngIf="(registerForm.get('lastName').touched || registerForm.get('lastName').dirty) && registerForm.get('lastName').errors">
        <span *ngIf="registerForm.get('lastName').errors.required">Please enter your last name.</span>
        <span *ngIf="registerForm.controls.lastName.errors.maxlength">The last name must be less than 50 characters.</span>
        </span>
      </div>
    </div>

    <div formGroupName="emailGroup" [ngClass]="{'has-danger': registerForm.get('emailGroup').errors }">
      <div class="form-group" [ngClass]="{'has-danger': emailMessage}">
        <label class="col-md-2 control-label" for="emailId">Email</label>

        <div class="col-md-8">
          <input class="form-control" id="emailId" type="email" placeholder="Email (required)" formControlName="email" />
          <span class="text-muted" *ngIf="emailMessage">{{ emailMessage }}</span>
        </div>
      </div>

      <div class="form-group" [ngClass]="{'has-danger': (registerForm.get('emailGroup.confirmEmail').touched ||
                                                  registerForm.get('emailGroup.confirmEmail').dirty) &&
                                                  !registerForm.get('emailGroup.confirmEmail').valid }">
        <label class="col-md-2 control-label" for="confirmEmailId">Confirm Email</label>

        <div class="col-md-8">
          <input class="form-control" id="confirmEmailId" type="email" placeholder="Confirm Email (required)" formControlName="confirmEmail"
          />
          <span class="text-muted" *ngIf="(registerForm.get('emailGroup.confirmEmail').touched ||
                                                            registerForm.get('emailGroup.confirmEmail').dirty) &&
                                                            (registerForm.get('emailGroup.confirmEmail').errors ||
                                                             registerForm.get('emailGroup').errors)">
          <span *ngIf="registerForm.get('emailGroup.confirmEmail').errors?.required">Please confirm your email address.</span>
          <span *ngIf="registerForm.get('emailGroup').errors?.match">The confirmation does not match the email address.</span>
          </span>
        </div>
      </div>
    </div>

    <div class="form-group" [ngClass]="{'has-danger': !registerForm.get('phone').valid }">
      <label class="col-md-2 control-label" for="phoneId">Phone</label>
      <div class="col-md-8">
        <input class="form-control" id="phoneId" type="tel" placeholder="Phone" formControlName="phone" />
        <span class="text-muted" *ngIf="registerForm.get('phone').errors">
            <span *ngIf="registerForm.get('phone').errors.required">Please enter your phone number.</span>
        </span>
      </div>
    </div>
    <div class="form-group">
      <div class="col-md-4 col-md-offset-2">
        <span>
          <button class="btn btn-primary" type="submit" [disabled]="!registerForm.valid">Save</button>
        </span>
        <span>
          <button class="btn btn-default" type="button" (click)="registerForm.reset()">Reset</button>
        </span>
      </div>
    </div>
  </fieldset>
</form>
